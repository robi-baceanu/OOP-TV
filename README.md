# OOP-TV

<div align="center"><img src="https://tenor.com/view/netflix-intro-binge-watch-gif-15122473.gif" width="500px"></div>

# Project description

OOP-TV is a project developed in two stages representing the back-end of a streaming platform, such as the already popular Netflix, Disney+ and HBO Max. As the name suggests, it emphasises on various Object-Oriented Programming concepts and implementation of design patterns, which will be described in the following paragraphs. Next, I will describe the project's general flow of action and give details about the implementation of each stage.

Note: As of today, only the first stage has been developed, with the further addition of the second stage which will further extend the project

## Stage 1

The first stage of the project focused on creating the streaming platform, along with performing simple actions, such as logging users in, creating accounts, switching between pages and applying actions on movies (purchasing, watching, giving them a like and a rating).

### Entry point and App class

The entry point of the project is the main method of the Main class. The method receives paths to input and output files from the args[] parameters:
- args[0] -> path to input file
- args[1] -> path to output files

Both input and output files come in the form of JSON files, and data is stored inside of them in the form of JSON ArrayNodes and ObjectNodes, parsed by the JSON&Jackson libraries.

Input data is properly parsed using the input classes implemented in the **fileio** package.

After receiving the input data, the proper app is initialized, along with the two databases that store users and movies (further details in the following sections).

The app is implemented by the *App* class, which follows the Singleton pattern. It stores the current user of the app (the one logged in), a list of movies that are __available__ to the current user (if not banned in his country) and the current page that is being browsed. The list of movies is not the one of movies that the user sees on the platform, but a list of movies that can be accessed by browsing the app. By parsing the actions given at input, the app will be updated by browsing through pages and changing users logged in.

Following the initial setups, each action will be parsed one be one. After successfully parsing all of the actions, the app's instance and the two databases will be erased, preparing the project for a new set of data from input.

Output of the actions is parsed using the utility class *OutputParser*, that generates ObjectNodes and ArrayNodes according to the needs.

### Databases

Both databases implement the *Database* interface and are implemented following the Singleton pattern. The users database stores all of the accounts created so far, along with each user's credentials (unfortunately no hashed passwords, not so hacker-proof :( sorry), while the movies database stores all movies currently available on the platform (very good ones ;) I promise).

### Pages

All of the pages classes inherit the *Page* abstract class, that defines the *changePage()* method, which changes pages from one another (what a surprise, right?). New page instances are generated by the PageFactory class, because yes, you guessed it, the pages were implemented following the Factory pattern.

Each page stores a list of movies, which represent the movies __displayed__ on the screen to the user. Some pages display a list of movies, some display only one movie, while some do not display movies at all. Furthermore, the displayed movies can be filtered (by genres and actors) and/or sorted (by duration and rating). All of the actions that are to be parsed will be restricted by the page from which they are called, some being allowed, while some not (producing an error to output).

Pages are organized in a hierarchy, and cannot be browsed randomly. The pages hierarchy stands as such:

* StartUp Page
    * Login Page
    * Register Page
* Home Page
    * Movies Page
        * See Details Page
            * Movies Page
            * Upgrades Page
            * Home Page
            * *Logout*
        * Home Page
        * *Logout*
    * Upgrades Page
        * Movies Page
        * Home Page
        * *Logout*
    * *Logout*
    
A successful login / register will move the user to the Home Page, whereas an unsuccessful attempt will result in returning to the StartUp page.

### Actions

Actions come in two flavours. They can be of *change page* type, which basically means browsing through pages and generating instances of pages, or *on page* type, which can be used or not depending on the current page's instance. An unsuccessful attempt of performing an *on page* action will result in generating an error to output.

The **change page** actions are pretty straight-forward, excepting the case when the user wants to go to a See Details page. Here, it is checked if the movie to be detailed is available to the user or not, and then the page is changed and updated accordingly by the *details()* method.

After each change page action, the app is updated, providing the new (or the same) user, the new page, and the list of movies available to the user.

The **on page** actions are the following:

* login --> attempts logging a user in with the provided credentials (*from Login Page*)
* register --> creates an account with the provided credentials (*from Register Page*)
* search --> displays a list of movies beginning with a given sequence (*from Movies Page*)
* filter --> sorts and / or filters the movies available to the user (*from Movies Page*)
* buy tokens --> converts balance to tokens (*from Upgrades Page*)
* buy premium account --> converts account from standard to premium (*from Upgrades Page*)
* purchase, watch, like, rate --> purchases / watches / likes/ gives a rating to a certain movie (*from See Details Page*)

All of the actions are implemented in the *ActionsParser* utility class, which is "the brains and muscles" of the whole project.

## Stage 2

**TO BE DEVELOPED**

Nothing to see here.

<div><img src="https://tenor.com/view/starwars-movealong-stormtrooper-gif-5509326.gif" width="400px"></div>



